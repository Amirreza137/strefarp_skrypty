(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-17b3c00f"],{"0121":function(t,e,a){t.exports=a.p+"img/citizen-image-placeholder.png"},"058d":function(t,e,a){},"0620":function(t,e,a){"use strict";var i=a("c8fc"),s=a.n(i);s.a},"2f74":function(t,e,a){"use strict";var i=a("058d"),s=a.n(i);s.a},"59db":function(t,e,a){"use strict";var i=a("cd21"),s=a.n(i);s.a},"6e44":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-row",{staticClass:"search-page search-citizens"},[a("b-col",{attrs:{cols:"12"}},[a("b-row",[a("b-col",{staticClass:"text-center"},[a("p",{staticClass:"police-text"},[t._v("WYSZUKAJ OBYWATELA")])])],1)],1),a("b-col",{attrs:{cols:"12"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchCitizen(e)}}},[a("b-row",{staticClass:"justify-content-center align-items-center"},[a("b-col",{attrs:{cols:"6"}},[a("b-form-group",{attrs:{"label-for":"citizen-name-input","invalid-feedback":t.invalidFeedback,state:t.state}},[a("b-input-group",[a("b-form-input",{attrs:{id:"citizen-name-input",state:t.state,trim:""},model:{value:t.citizenName,callback:function(e){t.citizenName=e},expression:"citizenName"}}),a("b-input-group-append",[a("b-button",{staticClass:"search-button",attrs:{disabled:!t.state},on:{click:t.searchCitizen}},[t._v("Wyszukaj")])],1)],1)],1)],1)],1)],1),null!=t.getSearchedCitizenData?a("b-col",{attrs:{cols:"12"}},[a("b-row",[a("b-col",{attrs:{cols:"2"}},[a("div",{staticClass:"profile-image"},[a("b-img",{attrs:{src:t.getProfileImage(t.getSearchedCitizenData),fluid:"",rounded:""}})],1)]),a("b-col",{staticClass:"citizen-profile",attrs:{cols:"2"}},[a("span",{staticClass:"police-text"},[t._v(t._s(t.getSearchedCitizenData.name))]),a("div",[a("span",{staticClass:"police-text"},[t._v("Płeć")]),a("p",{staticClass:"police-text-small"},[t._v(t._s(t.getSearchedCitizenData.gender))])]),a("div",[a("span",{staticClass:"police-text"},[t._v("Urodzony")]),a("p",{staticClass:"police-text-small"},[t._v(t._s(t.getSearchedCitizenData.birthdate))])]),a("div",[a("span",{staticClass:"police-text"},[t._v("Poszukiwany")]),a("p",[t.getSearchedCitizenData.isWanted?a("b-badge",{staticClass:"ml-1",attrs:{variant:"success"}},[t._v("TAK")]):a("b-badge",{staticClass:"ml-1",attrs:{variant:"danger"}},[t._v("NIE")])],1)])]),a("b-col",[a("b-tabs",{staticClass:"citizen-info-tab",attrs:{pills:"",card:"",fill:""}},[a("b-tab",{attrs:{title:"Notatki",active:""}},[a("searched-citizen-notes")],1),a("b-tab",{attrs:{title:"Mieszkania"}},[a("searched-citizen-houses")],1),a("b-tab",{attrs:{title:"Biznesy"}},[a("searched-citizen-businesses")],1),a("b-tab",{attrs:{title:"Wyroki"}},[a("searched-citizen-convictions")],1)],1)],1)],1)],1):t._e()],1)},s=[],n=(a("96cf"),a("3b8d")),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-col",{staticClass:"p-0 overflow-auto notes-container",attrs:{cols:"12"}},[a("b-col",{staticClass:"mt-1"},[a("b-button",{staticClass:"police-button",attrs:{variant:"primary",pill:"",block:""},on:{click:t.openNewNoteModal}},[t._v("Dodaj nową notatkę")])],1),t._l(t.getSearchedCitizenNotes,function(e,i){return a("b-col",{key:i,staticClass:"note-container"},[a("b-form-textarea",{staticClass:"note-content",attrs:{plaintext:"",value:e.text,"max-rows":"3"}}),a("div",{staticClass:"note-footer"},[a("span",[t._v(t._s(e.addedBy))]),a("span",{staticClass:"text-muted"},[t._v(" "+t._s(e.date)+" ")])])],1)}),a("b-modal",{ref:"modal",attrs:{id:"add-new-citizen-note-modal",size:"lg",centered:"",title:"Wprowadź nową notatkę"}},[a("b-form-textarea",{attrs:{id:"textarea-state",state:t.isFormValid(),placeholder:"Wprowadź nową notatkę, minimum 10 znaków",rows:"3",required:""},model:{value:t.newNote.text,callback:function(e){t.$set(t.newNote,"text",e)},expression:"newNote.text"}}),a("template",{slot:"modal-footer"},[a("b-button",{attrs:{variant:"success"},on:{click:t.tryAddNewNote}},[t._v("\n        DODAJ\n      ")]),a("b-button",{attrs:{variant:"danger"},on:{click:function(e){return t.hideModal()}}},[t._v("\n        ZAMKNIJ\n      ")])],1)],2)],2)},r=[],c={data:function(){return{noteState:null,newNote:{text:"",addedBy:"",date:""}}},methods:{openNewNoteModal:function(){this.$bvModal.show("add-new-citizen-note-modal")},tryAddNewNote:function(t){t.preventDefault(),this.handleSubmit()},handleSubmit:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){var e,a=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.isFormValid()){t.next=3;break}return this.$bvToast.toast("Walidacja się nie powiodła. Musisz uzupełnić wszystkie pola.",{title:"Uzupełnij wszystkie pola",autoHideDelay:3500,variant:"danger",appendToast:!0}),t.abrupt("return");case 3:if(null!=this.$store.state.userData){t.next=6;break}return this.$bvToast.toast("Walidacja się nie powiodła. Musisz uzupełnić wszystkie pola.",{title:"Uzupełnij wszystkie pola",autoHideDelay:3500,variant:"danger",appendToast:!0}),t.abrupt("return");case 6:return this.newNote.addedBy=this.$store.getters.getUserName,this.newNote.date=new Date(Date.now()).toLocaleDateString("en-GB"),this.$nextTick(function(){a.hideModal()}),t.next=11,this.$policeApi.addNewCitizenNote(this.newNote);case 11:e=t.sent,console.log("Response od servera w search citizen notes: ".concat(JSON.stringify(e))),"error"!=e&&(this.$store.dispatch("addNewCitizenNote",this.newNote),this.resetModal());case 14:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),isFormValid:function(){return this.newNote.text.length>=10},resetModal:function(){this.newNote={text:"",addedBy:"",date:""}},hideModal:function(){this.$refs.modal.hide()}},computed:{getSearchedCitizenNotes:function(){return this.$store.getters.citizenNotesSortedByDate}}},l=c,d=(a("0620"),a("2877")),u=Object(d["a"])(l,o,r,!1,null,"4c57689a",null),p=u.exports,h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"overflow-auto citizen-table-display"},[a("table",{staticClass:"table",attrs:{striped:""}},[t._m(0),a("tbody",t._l(t.getSearchedCitizenHouses,function(e,i){return a("tr",{key:i},[a("th",{attrs:{scope:"col"}},[t._v(t._s(i))]),a("td",[t._v(t._s(e.name))])])}),0)])])},b=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("#")]),a("th",{attrs:{scope:"col"}},[t._v("Nazwa")])])])}],v={computed:{getSearchedCitizenHouses:function(){return this.$store.state.searchedCitizen.houses}}},f=v,m=Object(d["a"])(f,h,b,!1,null,null,null),z=m.exports,w=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"overflow-auto citizen-table-display"},[a("table",{staticClass:"table",attrs:{striped:""}},[t._m(0),a("tbody",t._l(t.getSearchedCitizenBusinesses,function(e,i){return a("tr",{key:i},[a("th",{attrs:{scope:"col"}},[t._v(t._s(i))]),a("td",[t._v(t._s(e.name))])])}),0)])])},C=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("#")]),a("th",{attrs:{scope:"col"}},[t._v("Nazwa")])])])}],_={computed:{getSearchedCitizenBusinesses:function(){return this.$store.state.searchedCitizen.businesses}}},g=_,N=Object(d["a"])(g,w,C,!1,null,null,null),k=N.exports,x=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-col",{staticClass:"p-0 overflow-auto",attrs:{cols:"12"}},[a("b-button",{staticClass:"police-button",attrs:{variant:"primary"},on:{click:t.addNewConviction}},[t._v("Dodaj wyrok")]),a("div",{staticClass:"table-responsive overflow-auto citizen-table-display"},[a("table",{staticClass:"table table-sm",attrs:{striped:""}},[a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("Data")]),a("th",{attrs:{scope:"col"}},[t._v("Przestępstwa")]),a("th",{attrs:{scope:"col"}},[t._v("Notatka")]),a("th",{attrs:{scope:"col"}},[t._v("Długość")]),a("th",{attrs:{scope:"col"}},[t._v("Kara")]),a("th",{attrs:{scope:"col"}},[t._v("Wystawił")])])]),a("tbody",t._l(t.getSearchedCitizenConvictions,function(e,i){return a("tr",{key:i},[a("td",[t._v(t._s(e.date))]),a("td",[a("b-form-textarea",{staticClass:"convictions-content",attrs:{plaintext:"",value:e.crimes,rows:"3","no-resize":""}})],1),a("td",[a("b-form-textarea",{staticClass:"convictions-content",attrs:{plaintext:"",value:e.notes,rows:"3","no-resize":""}})],1),a("td",[t._v(t._s(e.length))]),a("td",[t._v(t._s(e.fee)),a("span",{staticClass:"money"},[t._v("$")])]),a("td",[t._v(t._s(e.issuedBy))])])}),0)])])],1)},y=[],S={methods:{addNewConviction:function(){this.$router.push({name:"newConvictionPage"})}},computed:{getSearchedCitizenConvictions:function(){return this.$store.state.searchedCitizen.convictions}}},$=S,D=(a("59db"),Object(d["a"])($,x,y,!1,null,"768e67f0",null)),j=D.exports,B={name:"searchCitizens",components:{SearchedCitizenNotes:p,SearchedCitizenHouses:z,SearchedCitizenBusinesses:k,SearchedCitizenConvictions:j},data:function(){return{citizenName:"",citizenData:null,regex:/^[a-zA-Z0-9ęółśążźćńĘÓŁŚĄŻŹĆŃ\s]{5,30}$/}},methods:{searchCitizen:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!this.validateRegex(this.citizenName)){t.next=6;break}return t.next=3,this.$policeApi.post("policeMdc:searchForCitizen",{citizenName:this.citizenName});case 3:this.citizenName="",t.next=7;break;case 6:this.$bvToast.toast("Podano błędnę imię i nazwisko, spróbuj jeszcze raz",{title:"Błędne imię i nazwisko",autoHideDelay:3500,variant:"danger",appendToast:!0});case 7:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),validateRegex:function(t){return this.regex.test(t)},getProfileImage:function(t){return null==t.profileImage||t.profileImage.length<=0?a("0121"):t.profileImage}},computed:{getSearchedCitizenData:function(){return this.$store.state.searchedCitizen},getSearchedCitizenNotes:function(){return this.$store.getters.citizenNotesSortedByDate},state:function(){return this.validateRegex(this.citizenName)},invalidFeedback:function(){return this.citizenName.length<=0?"":this.citizenName.length<5?"Wprowadź minimum 5 znaków":this.validateRegex(this.citizenName)?"":"Wprowadzono niedozwolone znaki"}}},M=B,W=(a("2f74"),Object(d["a"])(M,i,s,!1,null,"adc2c70c",null));e["default"]=W.exports},c8fc:function(t,e,a){},cd21:function(t,e,a){}}]);